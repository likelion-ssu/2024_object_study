
## 👑 객체지향의 핵심

1. 역할 :: Role
2. 책임 :: Responsibility
3. 협력 :: Collaboration

#### 예시를 통해 알아보는 간단 Overview

**협력**
- 객체들이 기능을 구현하기 위해 수행하는 상호작용
- → 승한이와 지은이는 멋사12기를 운영하기 위해 회장-부회장 직을 맡고 있다. 
- → 승한이와 지은이는 "__협력__" 하고 있다.

**책임**
- 객체가 협력에 참여하기 위해 수행하는 로직
- → 협력하기 위해, 승한이는 **대관할 강의실을 선택하고, 단톡방에 공지하는 "책임"** 을 가지고 있고, 지은이는 **강의실을 대관신청하는 "책임"** 을 가지고 있다. 

**역할**
- 객체들이 협력 안에서 수행하는 책임들이 모여 객체가 수행하는 **"역할"** 구성
- → 승한이와 지은이가 수행하는 책임들이 모여 **회장과 부회장 이라는 "역할"** 을 구성하고 있다. 


---
# ☝️ 협력 :: Collaboration

> 1. 두 객체 사이의 협력은 하나의 객체가 다른 객체에게 도움을 요청할 때 시작된다. 
> 2. **메시지 전송** 은 객체 사이의 협력을 위해 사용할 수 있는 유일한 커뮤니케이션 수단이다. 
> 3. 객체는 다른 객체의 상세한 내부 구현에 직접 접근할 수 없기 때문에 오직 메시지 전송을 통해서만 자신의 요청을 전달할 수 있다. 

1. 승한이와 지은이 사이의 협력은, 한 명이 다른 한 명에게 도움을 요청할 때 시작된다. 
	 - 승한이는 지은이에게 강의실 대관신청을 부탁해야 한다.
2. 승한이는 지은이에게 카카오톡 **메시지 전송**을 한다.
	- 승한 : 지은아 나 승한인데 정보관 102호 대관 신청 좀 하고 와라
3. 승한이는 지은이 몸을 제어할 수 없기 때문에 오직 카톡을 통해서만 요청을 전달할 수 있다.


> 1. 메시지를 수신한 객체는 **메서드**를 실행해 요청에 응답한다.
> 2. 외부의 객체는 오직 메시지만 전송할 수 있을 뿐이며 메시지를 어떻게 처리할지는 메시지를 수신한 객체가 직접 결정한다. 
> 	- 이는 객체가 자신의 일을 스스로 처리할 수 있는 자율적인 존재하는 것을 의미한다. 

1. 지은이는 메서드(reserveRoom(정보관201)) 메서드를 실행해 요청에 응답한다.
2. 승한이는 오직 카톡만 보낼 수 있을 뿐이고, 강의실을 어떻게 대관하는지는 지은이가 직접 결정한다. 
	- 지은이는 스스로 강의실을 대관할 수 있는 자율적인 존재이다. 


> Screening 이 Movie 에게 영화요금 계산 처리를 위임하는 이유는?
> → 기본 요금과 할인 정책을 Movie 가 갖고 있기 때문

1. 승한이는 왜 지은이에게 일을 떠넘기는가?
  → 지은이가 '강의실 대관신청서' 서류를 가방에 보관하고 있고, 강의실을 대관하는 절차를 알고 있기 때문이다. 
  
  강의실 대관을 승한이가 처리한다면, 승하이는 지은이의 가방을 뒤져서 서류를 꺼내서 작성하고, 지은이를 끌고 다니면서 대관절차를 진행할 것이다.
  지은이가 기분 나빠할 것이다. 이는 지은이의 자율성을 훼손하는 일이다. 

  승한이가 강의실 대관신청을 하면, 지은이는 자율적인 존재가 아니라 수동적인 존재로 전락하고 만다. 

> 1. 자율적인 객체는 자신에게 할당된 책임을 수행하던 중에 필요한 정보를 알지 못하거나 외부의 도움이 필요한 경우 적절한 객체에게 메시지를 전송해서 협력을 요청한다. 
> 2. 메시지를 수신한 객체 역시 메시지를 처리하던 중에 직접 처리할 수 없는 정보나 행동이 필요한 경우 또 다른 객체에게 도움을 요청한다.

1. 승한이는 회장일을 수행하던 중에, 강의실 대관신청이 필요한 경우 지은이에게 연락해서 협력을 요청한다. 
	- 승한이는 강의실 대관신청을 할 줄 모르기 때문에, 지은이에게 도움을 요청한다. 
2. 지은이가 대관신청을 하려던 중에, 서류가 없을 경우, 교휘에게 서류를 프린트 해오라고 시킨다.
	- 지은이는 프린트를 할 줄 모르기 때문에, 프린트를 할 줄 아는 교휘에게 도움을 요청한다.

---

## ✌️ 책임 :: Responsibility

##### 객체의 책임은 2가지 범주로 나눌 수 있다. 
1. 하는 것 :: Doing
2. 아는 것 :: Knowing

**하는 것**
- 객체를 생성하거나 계산을 수행하는 등의 스스로 하는 것 
- 다른 객체의 행동을 시작시키는 것 
- 다른 객체의 활동을 제어하고 조절하는 것

**아는 것**
- 사적인 정보에 관해 아는 것 
- 관련된 객체에 관해 아는 것
- 자신이 유도하거나 계산할 수 있는 것에 관해 아는 것 

승한이의 책임은 무엇인가?  
- 하는 것 : 1. 세션이 진행될 강의실을 선택하고, 2. 단톡방에 강의실을 공지한다.
- 아는 것 : 강의실의 호수

지은이의 책임은 무엇인가?
- 하는 것 : 강의실 대관 신청을 한다.
- 아는 것 : 강의실 대관 신청 서류

```java
public void notify(int roomNum){
	Reservation reservation = 김지은.reserveRoom(roomNum);

	String message = "이번 주 세션은 " + reservation.getRoomNum() + "호 에서 진행됩니다.";
	// 대충 공지하는 로직
}
```


#### 책임 주도 설계

> 협력을 설계하기 위해서는 책임에 초점을 맞춰야 한다. 
> 책임을 찾고, 책임을 수행할 적절한 객체를 찾아 책임을 할당하는 방식으로 협력을 설계하는 방법을 **책임 주도 설계 :: Responsibility-Driven Design, RDD** 라고 한다. 

###### 책임 주도 설계 방법
1. 시스템이 사용자에게 제공해야 하는 기능인 시스템 책임을 파악한다.
	- 12기 아기사자들에게 이번주 세션이 진행될 강의실을 공지해야 한다.
2. 시스템 책임을 더 작은 책임으로 분할한다.
	- 공지글을 단톡방에 올린다. 강의실을 대관한다.
3. 분할된 책임을 수행할 수 있는 적절한 객체 또는 역할을 찾아 책임을 할당한다.
	- 강의실 대관 → 김지은
4. 객체가 책임을 수행하는 도중 다른 객체의 도움이 필요한 경우 이를 책임질 적절한 객체 또는 역할을 찾는다. 
	- 대관 서류가 없어서 새로 프린트해야 한다. → 김교휘
5. 해당 객체 또는 역할에게 책임을 할당함으로써 두 객체가 협력하게 한다. 
	- 승한이와 지은이와 교휘는 협력


#### **메시지가 객체를 결정하고, 행동이 상태를 결정한다**

> 객체에게 책임을 할당하는 데 필요한 메시지를 먼저 식별하고 메시지를 처리할 객체를 나중에 선택했다는 것이 중요하다. 
> 다시 말해, 객체가 메시지를 선택하는 것이 아니라 메시지가 객체를 선택하게 한다. 

강의실을 대관해야 한다 → 지은이에게 맡기자.
새로운 대관 서류를 출력해야 한다 → 교휘에게 맡기자.


> 왜 메시지가 객체를 선택하게 해야하는가?
   1. 최소한의 인터페이스를 가진다.
   2. 추상적인 인터페이스를 가진다.

---

## 🤟 역할 :: Role

> 객체가 어떤 특정한 협력 안에서 수행하는 **"책임의 집합"** 을 **역할**이라고 부른다.

세션 진행 장소를 공지해야 한다. 
→ 공지를 하는 역할은? → 회장!
→ 회장 역할을 수행하는 객체 인스턴스는? → 유승한

강의실 대관을 해야한다.
→ 강의실 대관을 하는 역할은? → 부회장!
→ 부회장 역할을 수행하는 객체 인스턴스는? → 김지은

#### 왜 역할이라는 개념을 이용해서 설계 과정을 더 번거롭게 하는 것인가? 
#### → ⭐️ 유연하고 재사용 가능한 협력

if 역할을 고려하지 않고 객체에게 책임을 할당:
![[./assets/1.jpeg]]

네 종류의 객체가 참여하는 협력을 개별적으로 만들어야 할까? 
→ 코드 중복 발생

네 객체 모두 '세션을 진행한다' 라는 동일한 책임을 수행한다. 
객체라는 존재를 지우고 '세션을 진행하라' 라는 메시지에 응답할 수 있는 대표자를 생각한다면, 네 협력을 하나로 통합할 수 있다. 

![[./assets/2.jpeg]]

여기서, **"파트장"** 은  (기획파트장, 디자인파트장, 프론트파트장, 백엔드파트장) 을 포괄하는 "**추상화**" 이다.


#### ⭐️ 결론
동일한 책임을 수행하는 역할을 기반으로 N 개의 협력을 하나로 통합할 수 있다. 
따라서 역할을 이용하면 불필요한 중복 코드를 제거할 수 있다. 




