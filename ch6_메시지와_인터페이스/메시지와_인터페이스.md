---

---
----------------------
# í˜‘ë ¥ê³¼ ë©”ì‹œì§€

### í´ë¼ì´ì–¸íŠ¸ - ì„œë²„ ëª¨ë¸
: ë‘ ê°ì²´ ì‚¬ì´ì˜ í˜‘ë ¥ ê´€ê³„ë¥¼ ì„¤ëª…í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•˜ëŠ” ì „í†µì ì¸ ë©”íƒ€í¬


![[IMG_87B94578D74F-1.jpeg]]

Screening - í´ë¼ì´ì–¸íŠ¸
Movie - ì„œë²„

![[IMG_4294D07128F4-1.jpeg]]
Movie - í´ë¼ì´ì–¸íŠ¸
DiscountPolicy - ì„œë²„


# condition.isSatisfiedBy(screening);

**ë©”ì‹œì§€ (message)**
: ê°ì²´ë“¤ì´ í˜‘ë ¥í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•˜ëŠ” ì˜ì‚¬ì†Œí†µ ìˆ˜ë‹¨
ì˜¤í¼ë ˆì´ì…˜ëª…(operation name) + ì¸ì(argument)

**ë©”ì‹œì§€ ì „ì†¡ (message sending) or ë©”ì‹œì§€ íŒ¨ì‹± (message passing)**
: í•œ ê°ì²´ê°€ ë‹¤ë¥¸ ê°ì²´ì—ê²Œ ë„ì›€ì„ ìš”ì²­í•˜ëŠ” ê²ƒ
ë©”ì‹œì§€ ìˆ˜ì‹ ì(message receiver) + ì˜¤í¼ë ˆì´ì…˜ëª…(operation name) + ì¸ì(argument)

**ë©”ì‹œì§€ ì „ì†¡ì (message sender)**
: ë©”ì‹œì§€ë¥¼ ì „ì†¡í•˜ëŠ” ê°ì²´

**ë©”ì‹œì§€ ìˆ˜ì‹ ì (message receiver)**
: ë©”ì‹œì§€ë¥¼ ìˆ˜ì‹ í•˜ëŠ” ê°ì²´

### ë©”ì„œë“œ
: ë©”ì‹œì§€ë¥¼ ìˆ˜ì‹ í–ˆì„ ë•Œ ì‹¤ì œë¡œ ì‹¤í–‰ë˜ëŠ” í•¨ìˆ˜ ë˜ëŠ” í”„ë¡œì‹œì €
ì½”ë“œ ìƒì—ì„œ ë™ì¼í•œ ì´ë¦„ì˜ ë³€ìˆ˜ì—ê²Œ ë™ì¼í•œ ë©”ì‹œì§€ë¥¼ ì „ì†¡í•˜ë”ë¼ë„ ê°ì²´ì˜ íƒ€ì…ì— ë”°ë¼ ì‹¤í–‰ë˜ëŠ” ë©”ì„œë“œê°€ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆìŒ!

-> ê°ì²´ëŠ” ë©”ì‹œì§€ì™€ ë©”ì„œë“œë¼ëŠ” ì„œë¡œ ë‹¤ë¥¸ ê°œë…ì„ ì‹¤í–‰ ì‹œì ì— ì—°ê²°í•´ì•¼í•˜ë¯€ë¡œ ì»´íŒŒì¼ ì‹œì ì˜ ì˜ë¯¸ì™€ ì‹¤í–‰ ì‹œì ì´ ì˜ë¯¸ê°€ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆìŒ.

**ì‹¤í–‰ ì‹œì ì— ë©”ì‹œì§€ì™€ ë©”ì„œë“œë¥¼ ë°”ì¸ë”©í•˜ëŠ” ë©”ì»¤ë‹ˆì¦˜ì€ ë‘ ê°ì²´ ì‚¬ì´ì˜ ê²°í•©ë„ë¥¼ ë‚®ì¶¤ìœ¼ë¡œì¨ ìœ ì—°í•˜ê³  í™•ì¥ ê°€ëŠ¥í•œ ì½”ë“œë¥¼ ì‘ì„±í•  ìˆ˜ ìˆê²Œ ë§Œë“ ë‹¤.**

## í¼ë¸”ë¦­ ì¸í„°í˜ì´ìŠ¤ì™€ ì˜¤í¼ë ˆì´ì…˜

ê°ì²´ëŠ” ì•ˆê³¼ ë°–ì„ êµ¬ë¶„í•˜ëŠ” ëšœë ·í•œ ê²½ê³„ë¥¼ ê°€ì§„ë‹¤.

í¼ë¸”ë¦­ ì¸í„°í˜ì´ìŠ¤ : ê°ì²´ê°€ ì˜ì‚¬ì†Œí†µì„ ìœ„í•´ ì™¸ë¶€ì— ê³µê°œí•˜ëŠ” ë©”ì‹œì§€ì˜ ì§‘í•©.
ì˜¤í¼ë ˆì´ì…˜ : í¼ë¸”ë¦­ ì¸í„°í˜ì´ìŠ¤ì— í¬í•¨ëœ ë©”ì‹œì§€.
ì‹œê·¸ë‹ˆì²˜ : ì˜¤í¼ë ˆì´ì…˜(ë˜ëŠ” ë©”ì„œë“œ)ì˜ ì´ë¦„ê³¼ íŒŒë¼ë¯¸í„°ì˜ ëª©ë¡ì„ í•©ì³ ë¶€ë¦„.

![[Pasted image 20240727010050.png]]
1. ë©”ì‹œì§€ ì „ì†¡
2. ëŸ°íƒ€ì„ ì‹œìŠ¤í…œì—ì„œ ì˜¤í¼ë ˆì´ì…˜ í˜¸ì¶œë¡œ í•´ì„
3. ì ì ˆí•œ ë©”ì„œë“œë¥¼ ì°¾ì•„ ì‹¤í–‰

## ì¸í„°í˜ì´ìŠ¤ì™€ ì„¤ê³„ í’ˆì§ˆ
ì¢‹ì€ ì¸í„°í˜ì´ìŠ¤ëŠ” ìµœì†Œí•œì˜ ì¸í„°í˜ì´ìŠ¤ì™€ ì¶”ìƒì ì¸ ì¸í„°í˜ì´ìŠ¤ë¼ëŠ” ì¡°ê±´ì„ ë§Œì¡±í•´ì•¼ í•¨.

í¼ë¸”ë¦­ ì¸í„°í˜ì´ìŠ¤ì˜ í’ˆì§ˆì— ì˜í–¥ì„ ë¯¸ì¹˜ëŠ” ì›ì¹™ê³¼ ê¸°ë²•
- ë””ë¯¸í„° ë²•ì¹™
- ë¬»ì§€ ë§ê³  ì‹œì¼œë¼
- ì˜ë„ë¥¼ ë“œëŸ¬ë‚´ëŠ” ì¸í„°í˜ì´ìŠ¤
- ëª…ë ¹-ì¿¼ë¦¬ ë¶„ë¦¬

## ë””ë¯¸í„° ë²•ì¹™ (Law of Demeter)

> ì˜¤ì§ í•˜ë‚˜ì˜ ë„íŠ¸ë§Œ ì‚¬ìš©í•˜ë¼ (use only one dot)

ê°ì²´ì˜ ë‚´ë¶€ êµ¬ì¡°ì— ê°•í•˜ê²Œ ê²°í•©ë˜ì§€ ì•Šë„ë¡ í˜‘ë ¥ ê²½ë¡œë¥¼ ì œí•œí•˜ë¼.

```JAVA
public class ReservationAgency {

	public Reservation reserve(Screening screening, Customer customer, int audienceCount) {
		Movie movie = screening.getMovie();
	
		boolean discountable = false;
		for(DiscountCondition condition : movie.getDiscountConditions()) {
			if (condition.getType() == DiscountConditionType.PERIOD) {
				discountable = screening.getWhenScreened().getDayOfWeek().equals(condition.getDayOfWeek()) && condition.getStartTime().compareTo(screening.getWhenScreened().toLocalTime()) <= 0 &&
	condition.getEndTime().compareTo(screening.getWhenScreened().toLocalTime()) >= 0;
		} else {
	discountable = condition.getSequence() == screening.getSequence(); }
	
		if (discountable) {
			break;
			}
		}
...
```

**í´ë˜ìŠ¤ ë‚´ë¶€ì˜ ë©”ì„œë“œê°€ ì•„ë˜ ì¡°ê±´ì„ ë§Œì¡±í•˜ëŠ” ì¸ìŠ¤í„´ìŠ¤ì—ê²Œë§Œ ë©”ì‹œì§€ë¥¼ ì „ì†¡í•˜ë„ë¡ í•´ì•¼í•œë‹¤.**
- this ê°ì²´
- ë©”ì„œë“œì˜ ë§¤ê°œë³€ìˆ˜
- thisì˜ ì†ì„±
- thisì˜ ì†ì„±ì¸ ì»¬ë ‰ì…˜ì˜ ìš”ì†Œ
- ë©”ì„œë“œ ë‚´ì—ì„œ ìƒì„±ëœ ì§€ì—­ ê°ì²´

```JAVA
public class ReservationAgency {

public Reservation reserve(Screening screening, Customer customer, int audienceCount) {
	Money fee = screening.calculateFee(audienceCount);
	return new Reservation(customer, screening, fee, audienceCount);
	}
}
```

ë””ë¯¸í„° ë²•ì¹™ì„ ë”°ë¥´ë©´ ë¶€ë„ëŸ¼ íƒ€ëŠ” ì½”ë“œ (shy code) ë¥¼ ì‘ì„±í•  ìˆ˜ ìˆë‹¤.
shy code -> í•„ìš”í•œ ì–´ë–¤ ê²ƒë„ ë‹¤ë¥¸ ê°ì²´ì—ê²Œ ë³´ì—¬ì£¼ì§€ ì•Šìœ¼ë©°, ë‹¤ë¥¸ ê°ì²´ì˜ êµ¬í˜„ì— ì˜ì¡´í•˜ì§€ ì•ŠëŠ” ì½”ë“œ

`screening.getMovie().getDiscountConditions();`

![[Pasted image 20240727020855.png]]
-> ë‚´ë¶€ êµ¬í˜„ì´ ì™¸ë¶€ë¡œ ë…¸ì¶œë˜ì—ˆì„ ë•Œ ë‚˜íƒ€ë‚˜ëŠ” ì „í˜•ì ì¸ ë©”ì‹œì§€. ì „ì†¡ìëŠ” ë©”ì‹œì§€ ìˆ˜ì‹ ìì˜ ë‚´ë¶€ ì •ë³´ë¥¼ ìì„¸íˆ ì•Œê²Œë¨.

: ê°ì²´ì˜ ë‚´ë¶€ êµ¬ì¡°ë¥¼ ë¬»ëŠ” ë©”ì‹œì§€ê°€ ì•„ë‹ˆë¼ ìˆ˜ì‹ ìì—ê²Œ ë¬´ì–¸ê°€ë¥¼ ì‹œí‚¤ëŠ” ë©”ì‹œì§€ê°€ ë” ì¢‹ë‹¤!

# ë¬»ì§€ ë§ê³  ì‹œì¼œë¼ (Tell. Don't Ask)

ë””ë¯¸í„° ë²•ì¹™ì€ ê°ì²´ì˜ ìƒíƒœì— ê´€í•´ ë¬»ì§€ ë§ê³  ì›í•˜ëŠ” ê²ƒì„ ì‹œì¼œì•¼ í•œë‹¤ëŠ” ì‚¬ì‹¤ì„ ê°•ì¡°í–ˆë‹¤.
'ë¬»ì§€ ë§ê³  ì‹œì¼œë¼'ëŠ” ì´ëŸ° ìŠ¤íƒ€ì¼ì˜ ë©”ì‹œì§€ ì‘ì„±ì„ ì¥ë ¤í•˜ëŠ” ì›ì¹™ì„ ê°€ë¦¬í‚¤ëŠ” ìš©ì–´.

? ë‚´ë¶€ì˜ ìƒíƒœë¥¼ ë¬»ëŠ” ì˜¤í¼ë ˆì´ì…˜ì„ ì¸í„°í˜ì´ìŠ¤ì— í¬í•¨í•˜ê³  ìˆë‹¤ë©´ ?
-> í•´ë‹¹ ê°ì²´ê°€ ì±…ì„ì ¸ì•¼ í•˜ëŠ” í–‰ë™ì´ ê°ì²´ ì™¸ë¶€ë¡œ ëˆ„ìˆ˜ëœ ê²ƒì´ë‹¤.
-> ìƒíƒœë¥¼ ë¬»ëŠ” ì˜¤í¼ë ˆì´ì…˜ì„ í–‰ë™ì„ ìš”ì²­í•˜ëŠ” ì˜¤í¼ë ˆì´ì…˜ì„ ëŒ€ì²´í•¨ìœ¼ë¡œì¨ ì¸í„°í˜ì´ìŠ¤ë¥¼ í–¥ìƒì‹œì¼œë³´ì.

: ê°ì²´ì˜ ì •ë³´ë¥¼ ì´ìš©í•˜ëŠ” í–‰ë™ì„ ê°ì²´ì˜ ì™¸ë¶€ê°€ ì•„ë‹Œ ë‚´ë¶€ì— ìœ„ì¹˜ì‹œí‚¤ì!

# ì˜ë„ë¥¼ ë“œëŸ¬ë‚´ëŠ” ì¸í„°í˜ì´ìŠ¤

```JAVA
public class PeriodCondition {
	public boolean isSatisfiedByPeriod(Screening screening) { ... }
} 

public class SequenceCondition {
	public boolean isSatisfiedBySequence(Screening screening) { ... }
}
```

-> ë©”ì„œë“œê°€ ì–´ë–»ê²Œ ì‘ì—…ì„ ìˆ˜í–‰í•˜ëŠ”ì§€ ì´ë¦„ì— ì˜ ë‚˜ì™€ìˆë‹¤!
í•˜ì§€ë§Œ
- í´ë¼ì´ì–¸íŠ¸ ê´€ì ì—ì„œ `isSatisfiedByPeriod`,  `isSatisfiedBySequence` ë‘˜ ë‹¤ í• ì¸ ì¡°ê±´ì„ íŒë‹¨í•˜ëŠ” ë™ì¼í•œ ì‘ì—…ì„ ìˆ˜í–‰í•˜ì§€ë§Œ, ë©”ì„œë“œì˜ ì´ë¦„ì´ ë‹¬ë¼ ë‚´ë¶€ êµ¬í˜„ì„ ì •í™•í•˜ê²Œ ì•Œì§€ ì•ŠëŠ” ì´ìƒ ë™ì¼í•œ ì‘ì—…ì„ ìˆ˜í–‰í•œë‹¤ê³  íŒë‹¨í•˜ê¸° ì–´ë ¤ì›€!
- ë©”ì„œë“œ ìˆ˜ì¤€ì—ì„œì˜ ìº¡ìŠí™” ìœ„ë°˜! í´ë¼ì´ì–¸íŠ¸ê°€ í˜‘ë ¥í•˜ëŠ” ê°ì²´ì˜ ì¢…ë¥˜ë¥¼ ì•Œì•„ì•¼í•¨. í• ì¸ ì—¬ë¶€ë¥¼ íŒë‹¨í•˜ëŠ” ë°©ë²•ì´ ë³€ê²½ë˜ë©´ ë©”ì„œë“œ ì´ë¦„ì„ ë³€ê²½í•´ì•¼í•¨. ë©”ì„œë“œ ì´ë¦„ì„ ë³€ê²½í•˜ë©´ í´ë¼ì´ì–¸íŠ¸ ì½”ë“œë„ ë³€ê²½í•´ì•¼ í•¨. ë³€ê²½ì— ì·¨ì•½

ì™¸ë¶€ì˜ ê°ì²´ê°€ ë©”ì‹œì§€ë¥¼ ì „ì†¡í•˜ëŠ” ëª©ì ì„ ìƒê°í•˜ë©°, ê²°ê³¼ì ìœ¼ë¡œ í˜‘ë ¥í•˜ëŠ” í´ë¼ì´ì–¸íŠ¸ì˜ ì˜ë„ì— ë¶€í•©í•˜ë„ë¡ ë©”ì„œë“œì˜ ì´ë¦„ì„ ì§“ëŠ”ë‹¤.
ê·¸ë¦¬ê³  í´ë¼ì´ì–¸íŠ¸ì˜ ê´€ì ì—ì„œ ë©”ì„œë“œê°€ ì–´ë–¤ ì‘ì—…ì„ ìˆ˜í–‰í•˜ëŠ”ì§€ë¥¼ ìƒê°í•œë‹¤.

```JAVA
public class PeriodCondition {
	public boolean isSatisfiedBy(Screening screening) { ... }
}

public class SequenceCondition {
	public boolean isSatisfiedBy(Screening screening) { ... }
}
```
: ë™ì¼í•œ ëª©ì ì„ ê°€ì§„ë‹¤ëŠ” ê²ƒì„ ì´ë¦„ì„ í†µí•´ ëª…í™•íˆ í‘œí˜„í•¨.
í•˜ì§€ë§Œ
-> ê° íƒ€ì…ì— ë”°ë¼ ë‹¤ë¥´ê²Œ ì²˜ë¦¬í•´ì•¼í•¨!

```JAVA
public interface DiscountCondition{
	boolean isSatisfiedBy(Screening screening);
}

public class PeriodCondition implements DiscountCondition {
	public boolean isSatisfiedBy(Screening screening) { ... }
}

public class SequenceCondition implements DiscountCondition {
	public boolean isSatisfiedBy(Screening screening) { ... }
}
```
: í´ë¼ì´ì–¸íŠ¸ ì…ì¥ì—ì„œ ë‘ ë©”ì„œë“œë¥¼ ë™ì¼í•œ ë°©ì‹ìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ ë¨.

ë©”ì„œë“œê°€ ì–´ë–»ê²Œ ìˆ˜í–‰í•˜ëŠëƒê°€ ì•„ë‹ˆë¼ ë¬´ì—‡ì„ í•˜ëŠëƒì— ì´ˆì ì„ ë§ì¶”ì–´ì•¼ í•¨!
-> ì˜ë„ë¥¼ ë“œëŸ¬ë‚´ëŠ” ì„ íƒì(Intention Revealing Selector) 

# í•¨ê»˜ ëª¨ìœ¼ê¸°

```JAVA
public class Theater {
	private TicketSeller ticketSeller;	
		public Theater(TicketSeller ticketSeller) {		
			this.ticketSeller = ticketSeller;
		}Â 		
		public void enter(Audience audience) {		
			if (audience.getBag().hasInvitation()) {			
			Ticket ticket = ticketSeller.getTicketOffice().getTicket();			
			audience.getBag().setTicket(ticket);			
			} else {			
			Ticket ticket = ticketSeller.getTicketOffice().getTicket();			
			audience.getBag().minusAmount(ticket.getFee());			
			ticketSeller.getTicketOffice().plusAmount(ticket.getFee());			
			audience.getBag().setTicket(ticket);		
		}
	}
}```
```
```

### ë””ë¯¸í„° ë²•ì¹™ ìœ„ë°˜
 Theaterê°€ audienceì™€ ticketSeller ë‚´ë¶€ì— í¬í•¨ëœ ê°ì²´ì— ì§ì ‘ ì ‘ê·¼í•¨

- `audience.getBag().minusAmount(ticket.getFee());` 
--> Audienceê°€ Bagì„ ê°€ì§€ê³  ìˆìœ¼ë©°, ticketì´ getFee ë©”ì‹œì§€ë¥¼ ìˆ˜ì‹ í•  ìˆ˜ ìˆë‹¤ëŠ” ì‚¬ì‹¤ì„ ì•Œê²Œ ë¨.

- `Ticket ticket = ticketSeller.getTicketOffice().getTicket();`
--> ticketSellerê°€ ticketOfficeë¥¼ ê°€ì§€ê³  ìˆìœ¼ë©°, ticketOfficeê°€ getTicket ë©”ì‹œì§€ë¥¼ ìˆ˜ì‹ í•  ìˆ˜ ìˆë‹¤ëŠ” ì‚¬ì‹¤ì„ ì•Œê²Œ ë¨.

**ë¬»ì§€ ë§ê³  ì‹œì¼œë¼ ìŠ¤íƒ€ì¼ì„ ë”°ë¥´ëŠ” í¼ë¸”ë¦­ ì¸í„°í˜ì´ìŠ¤ë¥¼ ê°€ì§€ë„ë¡ ìˆ˜ì •í•˜ì**

### ê°œì„  #1
```JAVA
public class TicketSeller {
	public void setTicket(Audience audience) {	
	if (audience.getBag().hasInvitation()) {	
		Ticket ticket = ticketOffice.getTicket();		
		audience.getBag().setTicket(ticket);	
	} else {	
		Ticket ticket = ticketOffice.getTicket();
		audience.getBag().minusAmount(ticket.getFee());		
		ticketOffice.plusAmount(ticket.getFee());		
		audience.getBag().setTicket(ticket);
	}
}

public class Theater {
	public void enter(Audience audience) {
		ticketSeller.setTicket(audience);
	}
}
```

TheaterëŠ” ìì‹ ì´ ì†ì„±ìœ¼ë¡œ í¬í•¨í•˜ê³  ìˆëŠ” TicketSellerì˜ ì¸ìŠ¤í„´ìŠ¤ì—ê²Œë§Œ ë©”ì‹œì§€ë¥¼ ì „ì†¡í•˜ê²Œ ë˜ì—ˆë‹¤.
ì´ì œ TicketSellerë¥¼ ë³´ì.

**ê°œì„  #2**
```JAVA
public class Audience {
	public Long setTicket(Ticket ticket) {	
		if (bag.hasInvitation()) {		
		bag.setTicket(ticket);		
		return 0L;
	} else {	
		bag.setTicket(ticket);		
		bag.minusAmount(ticket.getFee());		
		return ticket.getFee();		
		}	
	}
}
```

```JAVA
public class TicketSeller {
	public void setTicket(Audience audience) {
	ticketOffice.plusAmount(audience.setTicket(ticketOffice.getTicket()));	
	}
}
```

Audienceë„ ë””ë¯¸í„° ë²•ì¹™ ìœ„ë°˜!!
**ê°œì„  #3**
```JAVA
public class Bag {
	public Long setTicket(Ticket ticket) {	
		if (hasInvitation()) {	
			this.ticket = ticket;	
			return 0L;	
		} else {
			this.ticket = ticket;	
			minusAmount(ticket.getFee());	
			return ticket.getFee();	
		}
	}  

	private boolean hasInvitation() {
		return invitation != null;
	}

	private void minusAmount(Long amount) {
		this.amount -= amount;
	}
}
```

```JAVA
public class Audience {
	public Long setTicket(Ticket ticket) {
		return bag.setTicket(ticket);	
	}
}
```

TicketSeller : setTicket
-> sellTo
Audience : setTicket
-> buy
Bag : setTicket
-> hold

: ê²°í•©ë„ê°€ ë‚®ìœ¼ë©´ì„œë„ ì˜ë„ë¥¼ ëª…í™•íˆ ë“œëŸ¬ë‚´ëŠ” ê°„ê²°í•œ í˜‘ë ¥ì„ í•˜ì!

## ë””ë¯¸í„° ê·œì¹™ì€ í•˜ë‚˜ì˜ ë„íŠ¸ë¥¼ ê°•ì œí•˜ëŠ” ê·œì¹™ì´ ì•„ë‹ˆë‹¤

`IntStream.of(1, 15, 20, 3, 9).filter(x -> x > 10).distinct().count();`

- ëª¨ë“  ë©”ì„œë“œ í˜¸ì¶œì´ ê°™ì€ Intstream í´ë˜ìŠ¤ ë‚´ì—ì„œ ì¼ì–´ë‚œë‹¤.
- í”Œë£¨ì–¸íŠ¸ ì¸í„°í˜ì´ìŠ¤ : ê°ì²´ì˜ ë©”ì„œë“œê°€ ê·¸ ê°ì²´ ìì‹ ì„ ë°˜í™˜í•˜ì—¬ ì—¬ëŸ¬ ë©”ì„œë“œ í˜¸ì¶œì„ ì—°ê²°í•  ìˆ˜ ìˆê²Œ í•´ì¤Œ (=ë©”ì„œë“œ ì²´ì´ë‹)

## ê²°í•©ë„ì™€ ì‘ì§‘ë„ì˜ ì¶©ëŒ

`ìœ„ì„ ë©”ì„œë“œ`ë¥¼ í†µí•´ ë‚´ë¶€ êµ¬ì¡°ë¥¼ ê°ì¶”ëŠ” ê²ƒì€ í˜‘ë ¥ì— ì°¸ì—¬í•˜ëŠ” ê°ì²´ë“¤ì˜ ê²°í•©ë„ë¥¼ ë‚®ì¶œ ìˆ˜ ìˆëŠ” ë™ì‹œì— ê°ì²´ì˜ ì‘ì§‘ë„ë¥¼ ë†’ì¼ ìˆ˜ ìˆëŠ” ê°€ì¥ íš¨ê³¼ì ì¸ ë°©ë²•ì´ë‹¤.

ëª¨ë“  ìƒí™©ì—ì„œ ë§¹ëª©ì ìœ¼ë¡œ ìœ„ì„ ë©”ì„œë“œë¥¼ ì¶”ê°€í•˜ë©´ ê°™ì€ `í¼ë¸”ë¦­ ì¸í„°í˜ì´ìŠ¤ ì•ˆì— ì–´ìš¸ë¦¬ì§€ ì•Šì€ ì˜¤í¼ë ˆì´ì…˜ë“¤ì´ ê³µì¡´í•˜ê²Œ ëœë‹¤`. `ê²°ê³¼ì ìœ¼ë¡œ ê°ì²´ëŠ” ìƒê´€ ì—†ëŠ” ì±…ì„ë“¤ì„ í•œêº¼ë²ˆì— ë– ì•ˆê²Œ ë˜ê¸° ë•Œë¬¸ì— ê²°ê³¼ì ìœ¼ë¡œ ì‘ì§‘ë„ê°€ ë‚®ì•„ì§„ë‹¤.`

ex.)
Audience : bag.getTicket().getSeatNumber();

# ëª…ë ¹ - ì¿¼ë¦¬ ë¶„ë¦¬ ì›ì¹™

ì–´ë–¤ ì ˆì°¨ë¥¼ ë¬¶ì–´ í˜¸ì¶œ ê°€ëŠ¥í•˜ë„ë¡ ì´ë¦„ì„ ë¶€ì—¬í•œ ê¸°ëŠ¥ ëª¨ë“ˆì„ `ë£¨í‹´(routine)`ì´ë¼ê³  ë¶€ë¥¸ë‹¤.
ë£¨í‹´ì€ ë‹¤ì‹œ `í”„ë¡œì‹œì €(procedure)`ì™€ `í•¨ìˆ˜(function)`ìœ¼ë¡œ êµ¬ë¶„í•  ìˆ˜ ìˆë‹¤.

- í”„ë¡œì‹œì €ëŠ” ë¶€ìˆ˜íš¨ê³¼ë¥¼ ë°œìƒì‹œí‚¬ ìˆ˜ ìˆì§€ë§Œ ê°’ì„ ë°˜í™˜í•  ìˆ˜ ì—†ë‹¤.
- í•¨ìˆ˜ëŠ” ê°’ì„ ë°˜í™˜í•  ìˆ˜ ìˆì§€ë§Œ ë¶€ìˆ˜íš¨ê³¼ë¥¼ ë°œìƒì‹œí‚¬ ìˆ˜ ì—†ë‹¤.

ê°ì²´ì˜ ìƒíƒœë¥¼ ìˆ˜ì •í•˜ëŠ” ì˜¤í¼ë ˆì´ì…˜ì„ `ëª…ë ¹(Command)`ì´ë¼ ë¶€ë¥´ê³ ,
ê°ì²´ì™€ ê´€ë ¨ëœ ì •ë³´ë¥¼ ë°˜í™˜í•˜ëŠ” ì˜¤í¼ë ˆì´ì…˜ì„ `ì¿¼ë¦¬(Query)`ë¼ê³  ë¶€ë¥¸ë‹¤.

ì–´ë–¤ ì˜¤í¼ë ˆì´ì…˜ë„ ëª…ë ¹ì¸ ë™ì‹œì— ì¿¼ë¦¬ì—¬ì„œëŠ” ì•ˆ ëœë‹¤!
- ê°ì²´ì˜ ìƒíƒœë¥¼ ë³€ê²½í•˜ëŠ” ëª…ë ¹ì€ ë°˜í™˜ê°’ì„ ê°€ì§ˆ ìˆ˜ ì—†ë‹¤.
- ê°ì²´ì˜ ì •ë³´ë¥¼ ë°˜í™˜í•˜ëŠ” ì¿¼ë¦¬ëŠ” ìƒíƒœë¥¼ ë³€ê²½í•  ìˆ˜ ì—†ë‹¤.

### ëª…ë ¹ê³¼ ì¿¼ë¦¬ë¥¼ ë¶„ë¦¬í•´ì„œ ì–»ê²Œ ë˜ëŠ” ì¥ì ì€ ë¬´ì—‡ì¸ê°€?

**ì´ë²¤íŠ¸ ê´€ë¦¬ ì†Œí”„íŠ¸ì›¨ì–´**
- ì´ë²¤íŠ¸(event)
	- íŠ¹ì • ì¼ìì— ì‹¤ì œë¡œ ë°œìƒí•˜ëŠ” ì‚¬ê±´
	- 2024ë…„ 7ì›” 27ì¼ í† ìš”ì¼ 16ì‹œ ~ 18ì‹œ ì˜¤ë¸Œì íŠ¸ ìŠ¤í„°ë””
		- ì´ë²¤íŠ¸ ì£¼ì œ (subject)
		- ì‹œì‘ ì¼ì‹œ (from)
		- ì†Œìš” ì‹œê°„ (duration)
- ë°˜ë³µì¼ì •(recurring schedule)
	- ì¼ì£¼ì¼ ë‹¨ìœ„ë¡œ ëŒì•„ì˜¤ëŠ” íŠ¹ì • ì‹œê°„ ê°„ê²©ì— ë°œìƒí•˜ëŠ” ì‚¬ê±´ ì „ì²´
	- ë§¤ì£¼ í† ìš”ì¼ 16ì‹œ ~ 18ì‹œ ë°˜ë³µë˜ëŠ” ì˜¤ë¸Œì íŠ¸ ìŠ¤í„°ë””
		- ì¼ì •ì˜ ì£¼ì œ (subject)
		- ë°˜ë³µë  ìš”ì¼ (dayOfWeek)
		- ì‹œì‘ ì‹œê°„ (from)
		- ê¸°ê°„ (duration)

**ë°˜ë³µ ì¼ì •ì„ ë§Œì¡±í•˜ëŠ” íŠ¹ì • ì¼ìì™€ ì‹œê°„ì— ë°œìƒí•˜ëŠ” ì‚¬ê±´ì´ ì´ë²¤íŠ¸**

```JAVA
  Event meeting = new Event("ìŠ¤í„°ë””", LocalDateTime.of(2024, 7, 27, 16, 0), Duration.ofMinutes(120));
```
: "2024ë…„ 7ì›” 27ì¼ í† ìš”ì¼ 16ì‹œë¶€í„° 18ì‹œê¹Œì§€ ì—´ë¦¬ëŠ” ìŠ¤í„°ë””"

```JAVA
RecurringSchedule schedule = new RecurringSchedule("ìŠ¤í„°ë””", DayOfWeek.SATURDAY, LocalTime.of(16, 0), Duration.ofMinutes(120));
```
: "ë§¤ì£¼ í† ìš”ì¼ 16ì‹œë¶€í„° 120ë¶„ ë™ì•ˆ ì—´ë¦¬ëŠ” ìŠ¤í„°ë””"

`isSatiedfied ë©”ì„œë“œ` : í˜„ì¬ ì´ë²¤íŠ¸ê°€ RecurringScheduleì´ ì •ì˜í•œ ë°˜ë³µ ì¼ì • ì¡°ê±´ì„ ë§Œì¡±í•˜ëŠ”ì§€ë¥¼ ê²€ì‚¬í•˜ëŠ” Event í´ë˜ìŠ¤ì—ì„œ ì œê³µí•˜ëŠ” ë©”ì„œë“œ (false/true)

```JAVA
assert meeting.isSatisfied(schedule) == true;
```

## ë²„ê·¸ ì‹œì‘! ğŸ›

```JAVA
RecurringSchedule schedule = new RecurringSchedule("ìŠ¤í„°ë””", DayOfWeek.SATURDAY, LocalTime.of(16, 0), Duration.ofMinutes(120));
Event meeting = new Event("íšŒì˜", LocalDateTime.of(2024, 7, 28, 16, 0), Duration.ofMinutes(120));

assert meeting.isSatisfied(schedule) == false;
assert meeting.isSatisfied(schedule) == true;
```

**isSatisfied**
```JAVA
public class Event {
	public boolean isSatisfied(RecurringSchedule schedule) {		
		if (from.getDayOfWeek() != schedule.getDayOfWeek() ||		
		!from.toLocalTime().equals(schedule.getFrom()) ||		
		!duration.equals(schedule.getDuration())) {		
		reschedule(schedule);		
		return false;
	}
		return true;	
	}
}
```

**reschedule**
```JAVA
public class Event {
	private void reschedule(RecurringSchedule schedule) {	
		from = LocalDateTime.of(from.toLocalDate().plusDays(daysDistance(schedule)), schedule.getFrom());
		duration = schedule.getDuration();
	}
	
	private long daysDistance(RecurringSchedule schedule) {
		return schedule.getDayOfWeek().getValue() - from.getDayOfWeek().getValue();	
	}
}
```

isSatisfiedê°€ ëª…ë ¹ê³¼ ì¿¼ë¦¬ì˜ ë‘ ê°€ì§€ ì—­í• ì„ ë™ì‹œì— ìˆ˜í–‰í•˜ê³  ìˆì›€.

**ê°œì„ **
```JAVA
public class Event {
	public boolean isSatisfied(RecurringSchedule schedule) {
		if (from.getDayOfWeek() != schedule.getDayOfWeek() ||
		!from.toLocalTime().equals(schedule.getFrom()) ||
		!duration.equals(schedule.getDuration())) {
		return false;
		}
	return true;
	} 
	
	public void reschedule(RecurringSchedule schedule) {
		from = LocalDateTime.of(from.toLocalDate().plusDays(daysDistance(schedule)), schedule.getFrom());
		duration = schedule.getDuration();
	}
}
```
isSatisfied - ì¿¼ë¦¬ ìˆ˜í–‰
reschedule - ëª…ë ¹ ìˆ˜í–‰

## ì°¸ì¡° íˆ¬ëª…ì„±ì„ ëˆ„ë¦´ ìˆ˜ ìˆë‹¤!

: ì–´ë–¤ í‘œí˜„ì‹ eê°€ ìˆì„ ë•Œ eì˜ ê°’ìœ¼ë¡œ eê°€ ë‚˜íƒ€ë‚˜ëŠ” ëª¨ë“  ìœ„ì¹˜ë¥¼ êµì²´í•˜ë”ë¼ë„ ê²°ê³¼ê°€ ë‹¬ë¼ì§€ì§€ ì•ŠëŠ” íŠ¹ì„±

- ëª¨ë“  í•¨ìˆ˜ë¥¼ ì´ë¯¸ ì•Œê³  ìˆëŠ” í•˜ë‚˜ì˜ ê²°ê³¼ê°’ìœ¼ë¡œ ëŒ€ì²´í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ì‹ì„ ì‰½ê²Œ ê³„ì‚°í•  ìˆ˜ ìˆë‹¤.
- ëª¨ë“  ê³³ì—ì„œ í•¨ìˆ˜ì˜ ê²°ê³¼ê°’ì´ ë™ì¼í•˜ê¸° ë•Œë¬¸ì— ì‹ì˜ ìˆœì„œë¥¼ ë³€ê²½í•˜ë”ë¼ë„ ê° ì‹ì˜ ê²°ê³¼ëŠ” ë‹¬ë¼ì§€ì§€ ì•ŠëŠ”ë‹¤.



>ìš°ë¦¬ì—ê²Œ ì¤‘ìš”í•œ ê²ƒì€ í˜‘ë ¥ì— ì í•©í•œ ê°ì²´ê°€ ì•„ë‹ˆë¼ í˜‘ë ¥ì— ì í•©í•œ ë©”ì‹œì§€ë‹¤. 
>ì±…ì„ ì£¼ë„ ì„¤ê³„ ë°©ë²•ì— ë”°ë¼ ë©”ì‹œì§€ê°€ ê°ì²´ë¥¼ ê²°ì •í•˜ê²Œ í•˜ë¼.


# Hands-on
```JAVA
@Getter 
public class User { 
    private String name; 
    private String address;
    private Order order; 
 }
 
@Getter 
public class Order {
	private String productName; 
    private String details;
 }
```

```JAVA
@Service 
public class DeliveryService { 
	public void deliverYupdduckOrder(final User user) { 
		if("ë§ˆë¼ì—½ë–¡".equals(user.getOrder().getProductName())) { 
			deliver(user);
            }
        }
    }
```

ë””ë¯¸í„° ë²•ì¹™ì„ ìœ„ë°˜í•˜ì§€ ì•ŠëŠ” ì½”ë“œë¡œ ë°”ê¾¸ê¸°